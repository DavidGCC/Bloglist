(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{305:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),s=n(11),o=n.n(s),i=n(14),u=n(18),l=n(368),d=n(358),j=n(75),b=n(359),p=n(306),m=n(360),h=n(361),f=n(362),O=n(363),x=n(364),g=n(28),v=function(e){var t=e.type,n=Object(a.useState)(""),r=Object(g.a)(n,2),c=r[0],s=r[1];return{input:{value:c,onChange:function(e){return s(e.target.value)},type:t},reset:function(){return s("")}}},w=n(24),y=n(25),C=n(8),k=n.n(C),B=n(15),S=n(26),T=n.n(S),I="/api/blogs",N=null,E=function(){return{headers:{Authorization:N}}},U=function(){var e=Object(B.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(I);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(I,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D={getAll:U,createBlog:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E(),e.next=3,T.a.post(I,t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){N="bearer ".concat(e)},like:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,(r=E()).headers.likeOnly=1,e.next=5,T.a.put("".concat(I,"/").concat(n),{likes:t.likes+1},r);case 5:return a=e.sent,e.abrupt("return",a.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=E(),e.next=4,T.a.delete("".concat(I,"/").concat(n),r);case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBlog:L,createComment:function(){var e=Object(B.a)(k.a.mark((function e(t,n){var r,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,e.next=3,T.a.post("".concat(I,"/").concat(r,"/comments"),{content:t});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},P={usage:"idle",message:null},R=function(e){return function(t){t({type:"SUCCESS",message:e}),clearTimeout(r),r=setTimeout((function(){return t({type:"CLEAR"})}),5e3)}},A=function(e){return function(t){t({type:"ERROR",message:e}),clearTimeout(r),r=setTimeout((function(){return t({type:"CLEAR"})}),5e3)}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return{usage:"error",message:t.message};case"SUCCESS":return{usage:"success",message:t.message};case"CLEAR":return{message:null};default:return e}},q=function(e,t){return function(n){D.createComment(e,t).then((function(e){n({type:"COMMENT",comment:e}),n(R("Successfully Created a Comment"))})).catch((function(e){return n(A("Couldn't Comment On This Blog. Message: ".concat(e.response.data.error)))}))}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return t.data;case"CREATE":return[].concat(Object(y.a)(e),[t.response]);case"DELETE":return e.filter((function(e){return e.id!==t.id}));case"LIKE":return e.map((function(e){return e.id===t.id?Object(w.a)(Object(w.a)({},e),{},{likes:e.likes+1}):Object(w.a)({},e)}));case"COMMENT":return e.map((function(e){return e.id===t.comment.blog?Object(w.a)(Object(w.a)({},e),{},{comments:[].concat(Object(y.a)(e.comments),[t.comment])}):Object(w.a)({},e)}));default:return e}},F=n(350),z=n(375),J=n(356),G=n(2),H=function(){var e=Object(i.b)(),t=v("text"),n=v("text"),r=v("text");return Object(G.jsx)("form",{onSubmit:function(a){a.preventDefault();var c,s={title:t.input.value,author:n.input.value,url:r.input.value};e((c=s,function(e){D.createBlog(c).then((function(t){e({type:"CREATE",response:t}),e(R("Created New Blog ".concat(c.title," by ").concat(c.author)))})).catch((function(t){return e(A("Couldn't Create Blog. Title, Author and Url Fields are Required. Message: ".concat(t.message)))}))})),t.reset(),n.reset(),r.reset()},children:Object(G.jsxs)(F.a,{children:[Object(G.jsx)(z.a,{margin:"dense",id:"titleInput",label:"Title",variant:"outlined",value:t.input.value,onChange:t.input.onChange}),Object(G.jsx)(z.a,{margin:"dense",id:"authorInput",label:"Author",variant:"outlined",value:n.input.value,onChange:n.input.onChange}),Object(G.jsx)(z.a,{margin:"dense",id:"urlInput",label:"Link to blog",variant:"outlined",value:r.input.value,onChange:r.input.onChange}),Object(G.jsx)(J.a,{type:"submit",variant:"contained",color:"primary",id:"createButton",children:"Create New Blog"})]})})},V=n(19),_=n(365),K=n(357),Q=Object(K.a)({columnHead:{fontSize:"1.4rem"},grid:{width:"80vw",margin:"0 auto"}}),X=function(e){var t=e.blogs,n=Q();return Object(G.jsxs)(d.a,{container:!0,className:n.grid,spacing:2,justify:"center",children:[Object(G.jsxs)(d.a,{item:!0,lg:2,children:[Object(G.jsx)(j.a,{variant:"h2",component:"h2",children:"Create"}),Object(G.jsx)(H,{})]}),Object(G.jsxs)(d.a,{item:!0,lg:10,children:[Object(G.jsx)(j.a,{variant:"h2",component:"h2",children:"Blogs"}),Object(G.jsx)(b.a,{component:p.a,children:Object(G.jsxs)(m.a,{children:[Object(G.jsx)(h.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{className:n.columnHead,children:"Title"}),Object(G.jsx)(O.a,{className:n.columnHead,children:"User"})]})}),Object(G.jsx)(x.a,{children:t.map((function(e){return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(_.a,{component:V.b,"data-cy":"blogLink",to:"/blogs/".concat(e.id),children:e.title})}),Object(G.jsx)(O.a,{children:Object(G.jsx)(_.a,{component:V.b,"data-cy":"blogUser",to:"/users/".concat(e.user.id),children:e.user.name})})]},e.id)}))})]})})]})]})},Y=n(354),Z=n(307),$=n(366),ee=n(367),te=n(150),ne=n.n(te),re=n(90),ae=n.n(re),ce=n(153),se=n.n(ce),oe=n(151),ie=n.n(oe),ue=n(152),le=n.n(ue),de=Object(K.a)({container:{textAlign:"center"}}),je=function(e){var t=e.blogId,n=de(),r=Object(i.b)(),a=Object(i.c)((function(e){return e.blogs.find((function(e){return e.id===t}))})),c=v("text"),s=Object(u.f)(),o=function(e){return r(function(e){return function(t){D.like(e).then((function(){t({type:"LIKE",id:e.id}),t(R("Liked Blog ".concat(e.title,".")))})).catch((function(n){return t(A("Couldn't Like Blog ".concat(e.title,". Message: ").concat(n.response.data.error)))}))}}(e))},l=function(e){r(function(e){return function(t){D.deleteBlog(e).then((function(){t({type:"DELETE",id:e.id}),t(R("Successfully Deleted Blog ".concat(e.title," by ").concat(e.author)))})).catch((function(n){return t(A("Couldn't Delete Blog ".concat(e.title,". Message: ").concat(n.response.data.error)))}))}}(e)),s.push("/")},b=function(){var e=Object(B.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),r(q(c.input.value,a)),c.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return a?Object(G.jsxs)(d.a,{container:!0,className:n.container,spacing:5,justify:"center",children:[Object(G.jsxs)(d.a,{item:!0,lg:8,children:[Object(G.jsx)(j.a,{component:"h2",variant:"h2",gutterBottom:!0,children:a.title}),Object(G.jsxs)(j.a,{component:"h4",variant:"h4",children:["Written by ",a.author]}),Object(G.jsxs)(j.a,{children:[Object(G.jsx)("b",{children:"Likes: "})," ",a.likes]}),Object(G.jsx)(j.a,{gutterBottom:!0,children:Object(G.jsx)(J.a,{"data-cy":"likeButton",variant:"contained",color:"primary",startIcon:Object(G.jsx)(ne.a,{}),onClick:function(){return o(a)},children:"Like"})}),Object(G.jsxs)(j.a,{children:[Object(G.jsx)("b",{children:"Added By User:"}),Object(G.jsx)(J.a,{component:V.b,to:"/users/".concat(a.user.id),startIcon:Object(G.jsx)(ae.a,{}),variant:"text",color:"primary",children:a.user.name})]}),Object(G.jsx)(j.a,{variant:"h6",paragraph:!0,children:Object(G.jsx)(_.a,{target:"_blank",rel:"noreferrer",href:a.url,children:"View Full Blog"})}),Object(G.jsx)(J.a,{"data-cy":"removeButton",variant:"contained",color:"secondary",startIcon:Object(G.jsx)(ie.a,{}),onClick:function(){return l(a)},children:"Remove"})]}),Object(G.jsxs)(d.a,{container:!0,item:!0,lg:4,alignContent:"center",justify:"center",direction:"column",children:[Object(G.jsx)(j.a,{variant:"h3",component:"h3",gutterBottom:!0,children:"Comments"}),Object(G.jsx)(F.a,{children:Object(G.jsxs)(d.a,{container:!0,spacing:2,alignItems:"flex-end",children:[Object(G.jsx)(d.a,{item:!0,children:Object(G.jsx)(z.a,Object(w.a)({id:"commentField",label:"Add Comment"},Object(w.a)({},c.input)))}),Object(G.jsx)(d.a,{item:!0,children:Object(G.jsx)(J.a,{type:"submit",onClick:b,variant:"contained",color:"primary",startIcon:Object(G.jsx)(le.a,{}),children:"Comment"})})]})}),Object(G.jsx)(Y.a,{children:a.comments.map((function(e){return Object(G.jsxs)(Z.a,{children:[Object(G.jsx)($.a,{children:Object(G.jsx)(se.a,{})}),Object(G.jsx)(ee.a,{children:e.content})]},e.id)}))})]})]}):Object(G.jsx)("h3",{children:"Loading..."})},be=n(154),pe=n.n(be),me=Object(K.a)({listItem:{width:"100%"},container:{textAlign:"center"},list:{width:"60%",margin:"0 auto"}}),he=function(e){var t=e.userId,n=me(),r=Object(i.c)((function(e){return e.users.find((function(e){if(e.id===t)return e}))}));return r?Object(G.jsxs)(l.a,{className:n.container,children:[Object(G.jsx)(j.a,{component:"h2",variant:"h2",className:n.header,children:"s"===r.name[r.name.length-1]?"".concat(r.name,"' Blogs"):"".concat(r.name,"'s Blogs")}),Object(G.jsx)(Y.a,{className:n.list,children:0===r.blogs.length?Object(G.jsx)(j.a,{container:"h3",varaint:"h3",children:"The user has not added any blogs yet"}):r.blogs.map((function(e){return Object(G.jsxs)(Z.a,{button:!0,className:n.listItem,component:V.b,to:"/blogs/".concat(e.id),children:[Object(G.jsx)($.a,{children:Object(G.jsx)(pe.a,{})}),Object(G.jsx)(ee.a,{children:e.title})]},e.id)}))})]}):Object(G.jsx)("h2",{children:"Loading ..."})},fe={login:function(){var e=Object(B.a)(k.a.mark((function e(t,n){var r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/api/login",{username:t,password:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Oe=n(378),xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var n=Object(Oe.a)(new Date,3),r=Object(w.a)(Object(w.a)({},t.user),{},{expiryDate:n});return window.localStorage.setItem("CU",JSON.stringify(r)),D.setToken(t.user.token),t.user;case"SET":return D.setToken(t.user.token),t.user;case"LOGOUT":return window.localStorage.removeItem("CU"),null;default:return e}},ge=n(380),ve=n(369),we=n(155),ye=n.n(we),Ce=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ke=function(){var e=Ce(),t=Object(i.b)(),n=Object(a.useState)(!1),r=Object(g.a)(n,2),c=(r[0],r[1],Object(a.useState)("")),s=Object(g.a)(c,2),o=s[0],u=s[1],b=Object(a.useState)(""),p=Object(g.a)(b,2),m=p[0],h=p[1];return Object(G.jsxs)(l.a,{component:"main",maxWidth:"xs",children:[Object(G.jsx)(ve.a,{}),Object(G.jsxs)("div",{className:e.paper,children:[Object(G.jsx)(ge.a,{className:e.avatar,children:Object(G.jsx)(ye.a,{})}),Object(G.jsx)(j.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e,t){return function(){var n=Object(B.a)(k.a.mark((function n(r){var a;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fe.login(e,t);case 3:a=n.sent,r({type:"LOGIN",user:a}),r(R("".concat(a.name," Successfully Logged In"))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),r(A("Wrong Username or Password."));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(o,m))},className:e.form,noValidate:!0,children:[Object(G.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:o,onChange:function(e){return u(e.target.value)}}),Object(G.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:m,onChange:function(e){return h(e.target.value)}}),Object(G.jsx)(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,"data-cy":"loginButton",children:"Sign In"}),Object(G.jsx)(d.a,{container:!0,children:Object(G.jsx)(d.a,{item:!0,children:Object(G.jsx)(_.a,{to:"/register",variant:"body2",component:V.b,children:"Don't have an account? Sign Up"})})})]})]})]})},Be=Object(K.a)({container:{margin:"0 auto",width:"50%%"},table:{width:"50%",margin:"0 auto"}}),Se=function(){var e=Object(i.c)((function(e){return e.users})),t=Be();return e?Object(G.jsx)(l.a,{className:t.container,children:Object(G.jsxs)(b.a,{className:t.table,children:[Object(G.jsx)(j.a,{variant:"h3",component:"h3",children:"Users"}),Object(G.jsxs)(m.a,{children:[Object(G.jsx)(h.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{children:"User"}),Object(G.jsx)(O.a,{children:"Blogs Created"})]})}),Object(G.jsx)(x.a,{children:e.map((function(e){return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(_.a,{component:V.b,to:"/users/".concat(e.id),children:e.name})}),Object(G.jsx)(O.a,{children:e.blogs.length})]},e.id)}))})]})]})}):Object(G.jsx)(j.a,{variant:"h3",component:"h3",children:"Loading..."})},Te=n(370),Ie=n(166),Ne=n(371),Ee=n(156),Ue=n.n(Ee),Le=n(157),De=n.n(Le),Pe=Object(K.a)({menu:{marginTop:"2rem"},bottomBorder:{borderBottom:"1px solid gray"}}),Re=function(){var e=Object(i.b)(),t=Pe(),n=Object(i.c)((function(e){return e.user})),r=c.a.useState(null),a=Object(g.a)(r,2),s=a[0],o=a[1],u=function(e){o(null===s?e.currentTarget:null)};return Object(G.jsxs)("div",{children:[Object(G.jsx)(Te.a,{"data-cy":"userIcon",onClick:u,color:"inherit",children:Object(G.jsx)(Ue.a,{fontSize:"large"})}),Object(G.jsxs)(Ie.a,{open:Boolean(s),onClose:u,anchorEl:s,className:t.menu,children:[Object(G.jsx)(Ne.a,{className:t.bottomBorder,children:Object(G.jsxs)(j.a,{component:"p",children:[n.name," Logged In"]})}),Object(G.jsxs)(Ne.a,{component:V.b,to:"/users/".concat(n.id),children:[Object(G.jsx)($.a,{children:Object(G.jsx)(ae.a,{})}),Object(G.jsx)(ee.a,{primary:"My Page"})]}),Object(G.jsxs)(Ne.a,{"data-cy":"logoutButton",onClick:function(t){var r;t.preventDefault(),window.confirm("Are you sure you want to log out?")&&e((r=n.name,function(e){e(R("".concat(r," Successfully Logged Out."))),e({type:"LOGOUT"})}))},children:[Object(G.jsx)($.a,{children:Object(G.jsx)(De.a,{})}),Object(G.jsx)(ee.a,{primary:"Logout"})]})]})]})},Ae=n(372),We=n(373),qe=n(374),Me=Object(K.a)({navDisplayFlex:{display:"flex",justifyContent:"space-between"},linkText:{textDecoration:"none",textTransform:"uppercase",color:"white"},displayLogout:{marginLeft:"auto"},appContainer:{marginBottom:"0.5rem"},container:{display:"flex",justifyContent:"space-between",alignItems:"center"}}),Fe=function(){var e=Object(u.f)(),t=Me();return Object(G.jsx)(Ae.a,{position:"sticky",className:t.appContainer,children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Te.a,{edge:"start",color:"inherit","aria-label":"home",onClick:function(){return e.push("/")},children:Object(G.jsx)(qe.a,{fontSize:"large"})}),Object(G.jsxs)(l.a,{maxWidth:!1,className:t.container,children:[Object(G.jsx)(Y.a,{component:"nav","aria-labelledby":"navigation",className:t.navDisplayFlex,children:[{title:"Blogs",path:"/"},{title:"Users",path:"/users"}].map((function(e){return Object(G.jsx)(_.a,{className:t.linkText,component:V.b,to:e.path,children:Object(G.jsx)(Z.a,{button:!0,children:Object(G.jsx)(ee.a,{primary:e.title})})},e.title)}))}),Object(G.jsx)(Re,{})]})]})})},ze=n(376),Je=n(379);function Ge(e){return Object(G.jsx)(ze.a,Object(w.a)({elevation:6,variant:"filled"},e))}var He=function(){var e=Object(i.c)((function(e){return e.notification})),t=e.usage,n=e.message;return Object(G.jsx)(Je.a,{open:Boolean(n),anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:5e3,children:Object(G.jsx)(Ge,{severity:t,children:n})})},Ve="/api/users",_e={getAllUserData:function(){var e=Object(B.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Ve);case 2:return t=e.sent,n=[],t.data.forEach((function(e){var t=e.name,r=e.blogs,a=e.id;n.push({name:t,blogCount:r.length,id:a})})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUserBlogs:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ve,"/").concat(t));case 2:return n=e.sent,r=n.data.blogs,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUsers:function(){var e=Object(B.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ve));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),registerUser:function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(Ve,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ke=n(165),Qe=n(58),Xe=n(355),Ye=Qe.a().shape({name:Qe.c().required("name is required"),username:Qe.c().required("username is required"),password:Qe.c().required("password is required"),confirmPassword:Qe.c().required("confirm password is required").oneOf([Qe.b("password"),null],"passowrds do not match")}),Ze={name:"",username:"",password:"",confirmPassword:""},$e=function(e){var t=e.handleSubmit,n=Object(u.f)();return Object(G.jsx)(Ke.a,{validationSchema:Ye,initialValues:Ze,onSubmit:t,enableReinitialize:!0,validateOnBlur:!0,children:function(e){var t,r,a=e.handleSubmit,c=e.errors,s=e.touched,o=e.values,i=e.handleChange,u=e.setFieldTouched;return Object(G.jsxs)(l.a,{maxWidth:"sm",children:[Object(G.jsx)(Xe.a,{error:Boolean(null===(t=n.location.state)||void 0===t?void 0:t.message),children:null===(r=n.location.state)||void 0===r?void 0:r.message}),Object(G.jsx)(z.a,{fullWidth:!0,id:"name",name:"name",label:"Nickname*",type:"text",placeholder:"Nickname",value:o.name,onChange:i,error:s.name&&Boolean(c.name),helperText:s.name&&c.name,onBlur:function(){return u("name")},variant:"outlined",margin:"normal"}),Object(G.jsx)(z.a,{fullWidth:!0,id:"username",name:"username",label:"Username*",type:"text",placeholder:"Username",value:o.username,onChange:i,error:s.username&&Boolean(c.username),helperText:s.username&&c.username,onBlur:function(){return u("username")},variant:"outlined",margin:"normal"}),Object(G.jsx)(z.a,{fullWidth:!0,id:"password",name:"password",label:"Password*",type:"password",placeholder:"Password",value:o.password,onChange:i,error:s.password&&Boolean(c.password),helperText:s.password&&c.password,onBlur:function(){return u("password")},variant:"outlined",margin:"normal"}),Object(G.jsx)(z.a,{fullWidth:!0,id:"confirmPassword",name:"confirmPassword",label:"Confirm Password*",type:"password",placeholder:"Confirm Password",value:o.confirmPassword,onChange:i,error:s.confirmPassword&&Boolean(c.confirmPassword),helperText:s.confirmPassword&&c.confirmPassword,onBlur:function(){return u("confirmPassword")},variant:"outlined",margin:"normal"}),Object(G.jsx)(J.a,{type:"submit",variant:"contained",color:"primary",onClick:a,fullWidth:!0,children:"Sign Up"})]})}})},et=function(){var e=Object(u.f)(),t=Object(i.b)(R),n=function(){var n=Object(B.a)(k.a.mark((function n(r){var a,c,s;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r.name,c=r.username,s=r.password,n.prev=1,n.next=4,_e.registerUser({name:a,username:c,password:s});case 4:e.push("/"),t(R("".concat(a," Successfully Joined Listablog"))),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),e.push({pathname:"/",state:{message:"couldn't register user. try again later"}}),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(G.jsx)($e,{handleSubmit:n})},tt=[],nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.users;default:return e}},rt=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.user})),n=Object(i.c)((function(e){return e.blogs.sort((function(e,t){return t.likes-e.likes}))}));Object(a.useEffect)((function(){e(function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAll();case 2:n=e.sent,t({type:"INIT",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.getUsers();case 2:n=e.sent,t({type:"INIT_USERS",users:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=window.localStorage.getItem("CU");return e?e.expiryDate<=new Date?(window.localStorage.removeItem("CU"),null):{type:"SET",user:JSON.parse(e)}:{type:"UNSET"}}())}),[]);var r=Object(u.g)("/blogs/:id"),c=r?r.params.id:null,s=Object(u.g)("/users/:id"),o=s?s.params.id:null;return Object(G.jsxs)(l.a,{maxWidth:"xl",children:[Object(G.jsx)(He,{}),null===t?Object(G.jsxs)(u.c,{children:[Object(G.jsx)(u.a,{exact:!0,path:"/",children:Object(G.jsx)(ke,{})}),Object(G.jsx)(u.a,{path:"/register",children:Object(G.jsx)(et,{})})]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Fe,{}),Object(G.jsxs)(u.c,{children:[Object(G.jsx)(u.a,{path:"/blogs/:id",children:Object(G.jsx)(je,{blogId:c})}),Object(G.jsx)(u.a,{path:"/users/:id",children:Object(G.jsx)(he,{userId:o})}),Object(G.jsx)(u.a,{path:"/users",children:Object(G.jsx)(Se,{})}),Object(G.jsx)(u.a,{path:["/","/blogs"],children:Object(G.jsx)(X,{blogs:n})})]})]})]})},at=n(54),ct=n(163),st=n(164),ot=Object(at.combineReducers)({blogs:M,notification:W,user:xe,users:nt}),it=Object(at.createStore)(ot,Object(ct.composeWithDevTools)(Object(at.applyMiddleware)(st.a)));o.a.render(Object(G.jsx)(V.a,{children:Object(G.jsx)(i.a,{store:it,children:Object(G.jsx)(rt,{})})}),document.getElementById("root"))}},[[305,1,2]]]);
//# sourceMappingURL=main.2585c3b9.chunk.js.map