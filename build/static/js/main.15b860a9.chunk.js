(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{306:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),s=n(11),i=n.n(s),o=n(14),u=n(18),l=n(367),d=n(357),j=n(75),b=n(358),m=n(307),p=n(359),h=n(360),f=n(361),O=n(362),x=n(363),g=n(30),v=function(e){var t=e.type,n=Object(r.useState)(""),a=Object(g.a)(n,2),c=a[0],s=a[1];return{input:{value:c,onChange:function(e){return s(e.target.value)},type:t},reset:function(){return s("")}}},y=n(24),w=n(25),C=n(8),k=n.n(C),B=n(15),S=n(26),T=n.n(S),I="/api/blogs",N=null,E=function(){return{headers:{Authorization:N}}},L=function(){var e=Object(B.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(I);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(I,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D={getAll:L,createBlog:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=E(),e.next=3,T.a.post(I,t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){N="bearer ".concat(e)},like:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,(a=E()).headers.likeOnly=1,e.next=5,T.a.put("".concat(I,"/").concat(n),{likes:t.likes+1},a);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteBlog:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,a=E(),e.next=4,T.a.delete("".concat(I,"/").concat(n),a);case 4:return r=e.sent,e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBlog:U,createComment:function(){var e=Object(B.a)(k.a.mark((function e(t,n){var a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.id,e.next=3,T.a.post("".concat(I,"/").concat(a,"/comments"),{content:t});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},P={usage:"idle",message:null},R=function(e){return function(t){t({type:"SUCCESS",message:e}),clearTimeout(a),a=setTimeout((function(){return t({type:"CLEAR"})}),5e3)}},A=function(e){return function(t){t({type:"ERROR",message:e}),clearTimeout(a),a=setTimeout((function(){return t({type:"CLEAR"})}),5e3)}},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ERROR":return{usage:"error",message:t.message};case"SUCCESS":return{usage:"success",message:t.message};case"CLEAR":return{message:null};default:return e}},q=function(e,t){return function(n){D.createComment(e,t).then((function(e){n({type:"COMMENT",comment:e}),n(R("Successfully Created a Comment"))})).catch((function(e){return n(A("Couldn't Comment On This Blog. Message: ".concat(e.response.data.error)))}))}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT":return t.data;case"CREATE":return[].concat(Object(w.a)(e),[t.response]);case"DELETE":return e.filter((function(e){return e.id!==t.id}));case"LIKE":return e.map((function(e){return e.id===t.id?Object(y.a)(Object(y.a)({},e),{},{likes:e.likes+1}):Object(y.a)({},e)}));case"COMMENT":return e.map((function(e){return e.id===t.comment.blog?Object(y.a)(Object(y.a)({},e),{},{comments:[].concat(Object(w.a)(e.comments),[t.comment])}):Object(y.a)({},e)}));default:return e}},F=n(349),z=n(374),J=n(355),G=n(2),H=function(){var e=Object(o.b)(),t=v("text"),n=v("text"),a=v("text");return Object(G.jsx)("form",{onSubmit:function(r){r.preventDefault();var c,s={title:t.input.value,author:n.input.value,url:a.input.value};e((c=s,function(e){D.createBlog(c).then((function(t){e({type:"CREATE",response:t}),e(R("Created New Blog ".concat(c.title," by ").concat(c.author)))})).catch((function(t){return e(A("Couldn't Create Blog. Title, Author and Url Fields are Required. Message: ".concat(t.message)))}))})),t.reset(),n.reset(),a.reset()},children:Object(G.jsxs)(F.a,{children:[Object(G.jsx)(z.a,{margin:"dense",id:"titleInput",label:"Title",variant:"outlined",value:t.input.value,onChange:t.input.onChange}),Object(G.jsx)(z.a,{margin:"dense",id:"authorInput",label:"Author",variant:"outlined",value:n.input.value,onChange:n.input.onChange}),Object(G.jsx)(z.a,{margin:"dense",id:"urlInput",label:"Link to blog",variant:"outlined",value:a.input.value,onChange:a.input.onChange}),Object(G.jsx)(J.a,{type:"submit",variant:"contained",color:"primary",id:"createButton",children:"Create New Blog"})]})})},V=n(19),_=n(364),K=n(356),Q=Object(K.a)({columnHead:{fontSize:"1.4rem"},grid:{width:"80vw",margin:"0 auto"}}),X=function(e){var t=e.blogs,n=Q();return Object(G.jsxs)(d.a,{container:!0,className:n.grid,spacing:2,justify:"center",children:[Object(G.jsxs)(d.a,{item:!0,lg:2,children:[Object(G.jsx)(j.a,{variant:"h2",component:"h2",children:"Create"}),Object(G.jsx)(H,{})]}),Object(G.jsxs)(d.a,{item:!0,lg:10,children:[Object(G.jsx)(j.a,{variant:"h2",component:"h2",children:"Blogs"}),Object(G.jsx)(b.a,{component:m.a,children:Object(G.jsxs)(p.a,{children:[Object(G.jsx)(h.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{className:n.columnHead,children:"Title"}),Object(G.jsx)(O.a,{className:n.columnHead,children:"User"})]})}),Object(G.jsx)(x.a,{children:t.map((function(e){return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(_.a,{component:V.b,"data-cy":"blogLink",to:"/blogs/".concat(e.id),children:e.title})}),Object(G.jsx)(O.a,{children:Object(G.jsx)(_.a,{component:V.b,"data-cy":"blogUser",to:"/users/".concat(e.user.id),children:e.user.name})})]},e.id)}))})]})})]})]})},Y=n(353),Z=n(308),$=n(365),ee=n(366),te=n(150),ne=n.n(te),ae=n(90),re=n.n(ae),ce=n(153),se=n.n(ce),ie=n(151),oe=n.n(ie),ue=n(152),le=n.n(ue),de=Object(K.a)({container:{textAlign:"center"}}),je=function(e){var t=e.blogId,n=de(),a=Object(o.b)(),r=Object(o.c)((function(e){return e.blogs.find((function(e){return e.id===t}))})),c=v("text"),s=Object(u.f)(),i=function(e){return a(function(e){return function(t){D.like(e).then((function(){t({type:"LIKE",id:e.id}),t(R("Liked Blog ".concat(e.title,".")))})).catch((function(n){return t(A("Couldn't Like Blog ".concat(e.title,". Message: ").concat(n.response.data.error)))}))}}(e))},l=function(e){a(function(e){return function(t){D.deleteBlog(e).then((function(){t({type:"DELETE",id:e.id}),t(R("Successfully Deleted Blog ".concat(e.title," by ").concat(e.author)))})).catch((function(n){return t(A("Couldn't Delete Blog ".concat(e.title,". Message: ").concat(n.response.data.error)))}))}}(e)),s.push("/")},b=function(){var e=Object(B.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),a(q(c.input.value,r)),c.reset();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r?Object(G.jsxs)(d.a,{container:!0,className:n.container,spacing:5,justify:"center",children:[Object(G.jsxs)(d.a,{item:!0,lg:8,children:[Object(G.jsx)(j.a,{component:"h2",variant:"h2",gutterBottom:!0,children:r.title}),Object(G.jsxs)(j.a,{component:"h4",variant:"h4",children:["Written by ",r.author]}),Object(G.jsxs)(j.a,{children:[Object(G.jsx)("b",{children:"Likes: "})," ",r.likes]}),Object(G.jsx)(j.a,{gutterBottom:!0,children:Object(G.jsx)(J.a,{"data-cy":"likeButton",variant:"contained",color:"primary",startIcon:Object(G.jsx)(ne.a,{}),onClick:function(){return i(r)},children:"Like"})}),Object(G.jsxs)(j.a,{children:[Object(G.jsx)("b",{children:"Added By User:"}),Object(G.jsx)(J.a,{component:V.b,to:"/users/".concat(r.user.id),startIcon:Object(G.jsx)(re.a,{}),variant:"text",color:"primary",children:r.user.name})]}),Object(G.jsx)(j.a,{variant:"h6",paragraph:!0,children:Object(G.jsx)(_.a,{target:"_blank",rel:"noreferrer",href:r.url,children:"View Full Blog"})}),Object(G.jsx)(J.a,{"data-cy":"removeButton",variant:"contained",color:"secondary",startIcon:Object(G.jsx)(oe.a,{}),onClick:function(){return l(r)},children:"Remove"})]}),Object(G.jsxs)(d.a,{container:!0,item:!0,lg:4,alignContent:"center",justify:"center",direction:"column",children:[Object(G.jsx)(j.a,{variant:"h3",component:"h3",gutterBottom:!0,children:"Comments"}),Object(G.jsx)(F.a,{children:Object(G.jsxs)(d.a,{container:!0,spacing:2,alignItems:"flex-end",children:[Object(G.jsx)(d.a,{item:!0,children:Object(G.jsx)(z.a,Object(y.a)({id:"commentField",label:"Add Comment"},Object(y.a)({},c.input)))}),Object(G.jsx)(d.a,{item:!0,children:Object(G.jsx)(J.a,{type:"submit",onClick:b,variant:"contained",color:"primary",startIcon:Object(G.jsx)(le.a,{}),children:"Comment"})})]})}),Object(G.jsx)(Y.a,{children:r.comments.map((function(e){return Object(G.jsxs)(Z.a,{children:[Object(G.jsx)($.a,{children:Object(G.jsx)(se.a,{})}),Object(G.jsx)(ee.a,{children:e.content})]},e.id)}))})]})]}):Object(G.jsx)("h3",{children:"Loading..."})},be=n(154),me=n.n(be),pe=Object(K.a)({listItem:{width:"100%"},container:{textAlign:"center"},list:{width:"60%",margin:"0 auto"}}),he=function(e){var t=e.userId,n=pe(),a=Object(o.c)((function(e){return e.users.find((function(e){if(e.id===t)return e}))}));return a?Object(G.jsxs)(l.a,{className:n.container,children:[Object(G.jsx)(j.a,{component:"h2",variant:"h2",className:n.header,children:"s"===a.name[a.name.length-1]?"".concat(a.name,"' Blogs"):"".concat(a.name,"'s Blogs")}),Object(G.jsx)(Y.a,{className:n.list,children:0===a.blogs.length?Object(G.jsx)(j.a,{container:"h3",varaint:"h3",children:"The user has not added any blogs yet"}):a.blogs.map((function(e){return Object(G.jsxs)(Z.a,{button:!0,className:n.listItem,component:V.b,to:"/blogs/".concat(e.id),children:[Object(G.jsx)($.a,{children:Object(G.jsx)(me.a,{})}),Object(G.jsx)(ee.a,{children:e.title})]},e.id)}))})]}):Object(G.jsx)("h2",{children:"Loading ..."})},fe={login:function(){var e=Object(B.a)(k.a.mark((function e(t,n){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post("/api/login",{username:t,password:n});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},Oe=n(377),xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":var n=Object(Oe.a)(new Date,3),a=Object(y.a)(Object(y.a)({},t.user),{},{expiryDate:n});return window.localStorage.setItem("CU",JSON.stringify(a)),D.setToken(t.user.token),t.user;case"SET":return D.setToken(t.user.token),t.user;case"LOGOUT":return window.localStorage.removeItem("CU"),null;default:return e}},ge=n(379),ve=n(368),ye=n(155),we=n.n(ye),Ce=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ke=function(){var e=Ce(),t=Object(o.b)(),n=Object(r.useState)(""),a=Object(g.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),u=Object(g.a)(i,2),b=u[0],m=u[1];return Object(G.jsxs)(l.a,{component:"main",maxWidth:"xs",children:[Object(G.jsx)(ve.a,{}),Object(G.jsxs)("div",{className:e.paper,children:[Object(G.jsx)(ge.a,{className:e.avatar,children:Object(G.jsx)(we.a,{})}),Object(G.jsx)(j.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(function(e,t){return function(){var n=Object(B.a)(k.a.mark((function n(a){var r;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fe.login(e,t);case 3:r=n.sent,a({type:"LOGIN",user:r}),a(R("".concat(r.name," Successfully Logged In"))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a(A("Wrong Username or Password."));case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(c,b))},className:e.form,noValidate:!0,children:[Object(G.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",autoFocus:!0,value:c,onChange:function(e){return s(e.target.value)}}),Object(G.jsx)(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:b,onChange:function(e){return m(e.target.value)}}),Object(G.jsx)(J.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,"data-cy":"loginButton",children:"Sign In"}),Object(G.jsx)(d.a,{container:!0,children:Object(G.jsx)(d.a,{item:!0,children:Object(G.jsx)(_.a,{to:"/register",variant:"body2","data-cy":"loginToRegisterLink",component:V.b,children:"Don't have an account? Sign Up"})})})]})]})]})},Be=Object(K.a)({container:{margin:"0 auto",width:"50%%"},table:{width:"50%",margin:"0 auto"}}),Se=function(){var e=Object(o.c)((function(e){return e.users})),t=Be();return e?Object(G.jsx)(l.a,{className:t.container,children:Object(G.jsxs)(b.a,{className:t.table,children:[Object(G.jsx)(j.a,{variant:"h3",component:"h3",children:"Users"}),Object(G.jsxs)(p.a,{children:[Object(G.jsx)(h.a,{children:Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{children:"User"}),Object(G.jsx)(O.a,{children:"Blogs Created"})]})}),Object(G.jsx)(x.a,{children:e.map((function(e){return Object(G.jsxs)(f.a,{children:[Object(G.jsx)(O.a,{children:Object(G.jsx)(_.a,{component:V.b,to:"/users/".concat(e.id),children:e.name})}),Object(G.jsx)(O.a,{children:e.blogs.length})]},e.id)}))})]})]})}):Object(G.jsx)(j.a,{variant:"h3",component:"h3",children:"Loading..."})},Te=n(369),Ie=n(167),Ne=n(370),Ee=n(156),Le=n.n(Ee),Ue=n(157),De=n.n(Ue),Pe=Object(K.a)({menu:{marginTop:"2rem"},bottomBorder:{borderBottom:"1px solid gray"}}),Re=function(){var e=Object(o.b)(),t=Pe(),n=Object(u.f)(),a=Object(o.c)((function(e){return e.user})),r=c.a.useState(null),s=Object(g.a)(r,2),i=s[0],l=s[1],d=function(e){l(null===i?e.currentTarget:null)};return Object(G.jsxs)("div",{children:[Object(G.jsx)(Te.a,{"data-cy":"userIcon",onClick:d,color:"inherit",children:Object(G.jsx)(Le.a,{fontSize:"large"})}),Object(G.jsxs)(Ie.a,{open:Boolean(i),onClose:d,anchorEl:i,className:t.menu,children:[Object(G.jsx)(Ne.a,{className:t.bottomBorder,children:Object(G.jsxs)(j.a,{component:"p",children:[a.name," Logged In"]})}),Object(G.jsxs)(Ne.a,{component:V.b,to:"/users/".concat(a.id),children:[Object(G.jsx)($.a,{children:Object(G.jsx)(re.a,{})}),Object(G.jsx)(ee.a,{primary:"My Page"})]}),Object(G.jsxs)(Ne.a,{"data-cy":"logoutButton",onClick:function(t){var r;t.preventDefault(),window.confirm("Are you sure you want to log out?")&&(e((r=a.name,function(e){e(R("".concat(r," Successfully Logged Out."))),e({type:"LOGOUT"})})),n.replace("/"))},children:[Object(G.jsx)($.a,{children:Object(G.jsx)(De.a,{})}),Object(G.jsx)(ee.a,{primary:"Logout"})]})]})]})},Ae=n(371),We=n(372),qe=n(373),Me=Object(K.a)({navDisplayFlex:{display:"flex",justifyContent:"space-between"},linkText:{textDecoration:"none",textTransform:"uppercase",color:"white"},displayLogout:{marginLeft:"auto"},appContainer:{marginBottom:"0.5rem"},container:{display:"flex",justifyContent:"space-between",alignItems:"center"}}),Fe=function(){var e=Object(u.f)(),t=Me();return Object(G.jsx)(Ae.a,{position:"sticky",className:t.appContainer,children:Object(G.jsxs)(We.a,{children:[Object(G.jsx)(Te.a,{edge:"start",color:"inherit","aria-label":"home",onClick:function(){return e.push("/")},children:Object(G.jsx)(qe.a,{fontSize:"large"})}),Object(G.jsxs)(l.a,{maxWidth:!1,className:t.container,children:[Object(G.jsx)(Y.a,{component:"nav","aria-labelledby":"navigation",className:t.navDisplayFlex,children:[{title:"Blogs",path:"/"},{title:"Users",path:"/users"}].map((function(e){return Object(G.jsx)(_.a,{className:t.linkText,component:V.b,to:e.path,children:Object(G.jsx)(Z.a,{button:!0,children:Object(G.jsx)(ee.a,{primary:e.title})})},e.title)}))}),Object(G.jsx)(Re,{})]})]})})},ze=n(375),Je=n(378);function Ge(e){return Object(G.jsx)(ze.a,Object(y.a)({elevation:6,variant:"filled"},e))}var He=function(){var e=Object(o.c)((function(e){return e.notification})),t=e.usage,n=e.message;return Object(G.jsx)(Je.a,{open:Boolean(n),anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:5e3,children:Object(G.jsx)(Ge,{"data-cy":"notification",severity:t,children:n})})},Ve="/api/users",_e={getAllUserData:function(){var e=Object(B.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get(Ve);case 2:return t=e.sent,n=[],t.data.forEach((function(e){var t=e.name,a=e.blogs,r=e.id;n.push({name:t,blogCount:a.length,id:r})})),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getUserBlogs:function(){var e=Object(B.a)(k.a.mark((function e(t){var n,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ve,"/").concat(t));case 2:return n=e.sent,a=n.data.blogs,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getUsers:function(){var e=Object(B.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("".concat(Ve));case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),registerUser:function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.post(Ve,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ke=n(166),Qe=n(58),Xe=n(354),Ye=n(163),Ze=n.n(Ye),$e=Qe.a().shape({name:Qe.c().required("name is required"),username:Qe.c().required("username is required"),password:Qe.c().required("password is required"),confirmPassword:Qe.c().required("confirm password is required").oneOf([Qe.b("password"),null],"passowrds do not match")}),et=Object(K.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),tt={name:"",username:"",password:"",confirmPassword:""},nt=function(e){var t=e.handleSubmit,n=Object(u.f)(),a=et();return Object(G.jsx)(Ke.a,{validationSchema:$e,initialValues:tt,onSubmit:t,enableReinitialize:!0,validateOnBlur:!0,children:function(e){var t,r,c=e.handleSubmit,s=e.errors,i=e.touched,o=e.values,u=e.handleChange,b=e.setFieldTouched;return Object(G.jsx)(l.a,{maxWidth:"sm",children:Object(G.jsxs)("div",{className:a.paper,children:[Object(G.jsx)(ge.a,{className:a.avatar,children:Object(G.jsx)(Ze.a,{})}),Object(G.jsx)(j.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(G.jsx)(Xe.a,{error:Boolean(null===(t=n.location.state)||void 0===t?void 0:t.message),children:null===(r=n.location.state)||void 0===r?void 0:r.message}),Object(G.jsxs)("form",{className:a.form,children:[Object(G.jsx)(z.a,{fullWidth:!0,id:"name",name:"name",label:"Nickname*",type:"text",placeholder:"Nickname",value:o.name,onChange:u,error:i.name&&Boolean(s.name),helperText:i.name&&s.name,onBlur:function(){return b("name")},variant:"outlined",margin:"normal","data-cy":"name"}),Object(G.jsx)(z.a,{fullWidth:!0,id:"username",name:"username",label:"Username*",type:"text",placeholder:"Username",value:o.username,onChange:u,error:i.username&&Boolean(s.username),helperText:i.username&&s.username,onBlur:function(){return b("username")},variant:"outlined",margin:"normal","data-cy":"username"}),Object(G.jsx)(z.a,{fullWidth:!0,id:"password",name:"password",label:"Password*",type:"password",placeholder:"Password",value:o.password,onChange:u,error:i.password&&Boolean(s.password),helperText:i.password&&s.password,onBlur:function(){return b("password")},variant:"outlined",margin:"normal","data-cy":"password"}),Object(G.jsx)(z.a,{fullWidth:!0,id:"confirmPassword",name:"confirmPassword",label:"Confirm Password*",type:"password",placeholder:"Confirm Password",value:o.confirmPassword,onChange:u,error:i.confirmPassword&&Boolean(s.confirmPassword),helperText:i.confirmPassword&&s.confirmPassword,onBlur:function(){return b("confirmPassword")},variant:"outlined",margin:"normal","data-cy":"confirmPassword"}),Object(G.jsx)(J.a,{type:"submit",variant:"contained",color:"primary",onClick:c,className:a.submit,fullWidth:!0,"data-cy":"registerButton",children:"Sign Up"}),Object(G.jsx)(d.a,{container:!0,children:Object(G.jsx)(d.a,{item:!0,children:Object(G.jsx)(_.a,{to:"/",variant:"body1",component:V.b,"data-cy":"registerToLoginLink",children:"Already have an account? Sign In Instead"})})})]})]})})}})},at=function(){var e=Object(u.f)(),t=Object(o.b)(R),n=function(){var n=Object(B.a)(k.a.mark((function n(a){var r,c,s;return k.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.name,c=a.username,s=a.password,n.prev=1,n.next=4,_e.registerUser({name:r,username:c,password:s});case 4:e.push("/"),t(R("".concat(r," Successfully Joined Listablog"))),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(1),e.push({pathname:"/",state:{message:"couldn't register user. try again later"}}),console.error(n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}();return Object(G.jsx)(nt,{handleSubmit:n})},rt=[],ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_USERS":return t.users;default:return e}},st=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.user})),n=Object(o.c)((function(e){return e.blogs.sort((function(e,t){return t.likes-e.likes}))}));Object(r.useEffect)((function(){e(function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.getAll();case 2:n=e.sent,t({type:"INIT",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(B.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e.getUsers();case 2:n=e.sent,t({type:"INIT_USERS",users:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=window.localStorage.getItem("CU");return e?e.expiryDate<=new Date?(window.localStorage.removeItem("CU"),null):{type:"SET",user:JSON.parse(e)}:{type:"UNSET"}}())}),[]);var a=Object(u.g)("/blogs/:id"),c=a?a.params.id:null,s=Object(u.g)("/users/:id"),i=s?s.params.id:null;return Object(G.jsxs)(l.a,{maxWidth:"xl",children:[Object(G.jsx)(He,{}),null===t?Object(G.jsxs)(u.c,{children:[Object(G.jsx)(u.a,{exact:!0,path:"/",children:Object(G.jsx)(ke,{})}),Object(G.jsx)(u.a,{path:"/register",children:Object(G.jsx)(at,{})})]}):Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)(Fe,{}),Object(G.jsxs)(u.c,{children:[Object(G.jsx)(u.a,{path:"/blogs/:id",children:Object(G.jsx)(je,{blogId:c})}),Object(G.jsx)(u.a,{path:"/users/:id",children:Object(G.jsx)(he,{userId:i})}),Object(G.jsx)(u.a,{path:"/users",children:Object(G.jsx)(Se,{})}),Object(G.jsx)(u.a,{path:["/","/blogs"],children:Object(G.jsx)(X,{blogs:n})})]})]})]})},it=n(54),ot=n(164),ut=n(165),lt=Object(it.combineReducers)({blogs:M,notification:W,user:xe,users:ct}),dt=Object(it.createStore)(lt,Object(ot.composeWithDevTools)(Object(it.applyMiddleware)(ut.a)));i.a.render(Object(G.jsx)(V.a,{children:Object(G.jsx)(o.a,{store:dt,children:Object(G.jsx)(st,{})})}),document.getElementById("root"))}},[[306,1,2]]]);
//# sourceMappingURL=main.15b860a9.chunk.js.map